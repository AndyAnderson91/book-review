<div class="card mb-3" style="max-width: 1080px;">
    <div class="row g-0">
        <div class="col-sm-2">
            <a href="{{book.get_absolute_url}}">
                <img src="{{ book.full_img.url }}" class="card-img rounded border d-none d-sm-block" alt="{{ book.title }}">
                <img src="{{ book.small_img.url }}" class="card-img rounded border d-block d-sm-none" alt="{{ book.title }}">
            </a>
        </div>
        <div class="col-sm-10">
            <div class="card-body pt-2">
                <h5 class="card-title">
                    <a href="{{book.get_absolute_url}}">{{book.title}}</a>
                </h5>

                <p class="card-text">by {% for author in book.authors.all %}
                    {% if request.path == '/search/' and category == 'author' %}
                        {{author}}
                    {% else %}
                        <a href="{% url 'br:search' %}?q={{author}}&category=author">{{author}}</a>
                    {% endif %}
                    {% if not forloop.last %},{% endif %}
                {% endfor %}
                </p>
                <p class="card-text">
                    {% if book.is_published %}
                        Rating:
                        {% if book.avg_rating %}
                            {{book.avg_rating|floatformat:2}} (<a href="{{book.get_absolute_url}}#reviews">{{book.review_set.count}} review{{book.review_set.count|pluralize}}</a>)
                        {% else %}
                            - (no reviews yet)
                        {% endif %}
                    {% else %}
                        Coming {{book.pub_date|date:'F'}} {{book.pub_date.day}},
                        {% if request.path == '/search/' and category == 'year' %}
                            {{book.pub_date.year}}
                        {% else %}
                            <a href="{% url 'br:search' %}?q={{book.pub_date.year}}&category=year">{{book.pub_date.year}}</a>
                        {% endif %}

                    {% endif %}
                </p>

                <p class="card-text">
                    {% if book.description|length > 500 %}
                        {{book.description|slice:':500'}}...
                    {% else %}
                        {{book.description}}
                    {% endif %}
                </p>

            </div>
        </div>
    </div>
</div>
