{#<p>#}
{#    <a href="{{book.get_absolute_url}}">{{book.title}}</a>#}
{##}
{#    {% if book.is_published %}#}
{#        (published in#}
{#        {% if request.path == '/search/' and category == 'year' %}#}
{#            {{book.pub_date.year}})#}
{#        {% else %}#}
{#            <a href="{% url 'br:search' %}?q={{book.pub_date.year}}&category=year">{{book.pub_date.year}})</a>#}
{#        {% endif %}#}
{##}
{#    {% else %}#}
{#        (coming {{book.pub_date|date:'F'}} {{book.pub_date.day}},#}
{#        {% if request.path == '/search/' and category == 'year' %}#}
{#            {{book.pub_date.year}})#}
{#        {% else %}#}
{#            <a href="{% url 'br:search' %}?q={{book.pub_date.year}}&category=year">{{book.pub_date.year}})</a>#}
{#        {% endif %}#}
{##}
{#    {% endif %}#}
{#</p>#}

{#<img src="{{ book.img.url }}" height="200" width="200">#}

{#<p>by {% for author in book.authors.all %}#}
{#    {% if request.path == '/search/' and category == 'author' %}#}
{#        {{author}}#}
{#    {% else %}#}
{#        <a href="{% url 'br:search' %}?q={{author}}&category=author">{{author}}</a>#}
{#    {% endif %}#}
{#    {% if not forloop.last %},{% endif %}#}
{#{% endfor %}#}
{#</p>#}

{#<p>Rating:#}
{#    {% if book.avg_rating %}#}
{#        {{book.avg_rating|floatformat:2}} (<a href="{{book.get_absolute_url}}#reviews">{{book.review_set.count}} review{{book.review_set.count|pluralize}}</a>)#}
{#    {% else %}#}
{#        - (no reviews yet)#}
{#    {% endif %}#}
{#</p>#}

{#<p>#}
{#    {% if book.description|length > 300 %}#}
{#        {{book.description|slice:':300'}}...#}
{#    {% else %}#}
{#        {{book.description}}#}
{#    {% endif %}#}
{#</p>#}

<div class="card mb-3">
    <div class="row g-0">
        <div class="col-md-2">
            <a href="{{book.get_absolute_url}}">
                <img src="{{ book.img.url }}" class="img-fluid rounded-start" width="180" >
            </a>
        </div>
        <div class="col-md-10">
            <div class="card-body">

                <h5 class="card-title">
                    <a href="{{book.get_absolute_url}}">{{book.title}}</a>
                </h5>

                <p>by {% for author in book.authors.all %}
                    {% if request.path == '/search/' and category == 'author' %}
                        {{author}}
                    {% else %}
                        <a href="{% url 'br:search' %}?q={{author}}&category=author">{{author}}</a>
                    {% endif %}
                    {% if not forloop.last %},{% endif %}
                {% endfor %}
                </p>
                <p>
                    {% if book.is_published %}
                        Rating:
                        {% if book.avg_rating %}
                            {{book.avg_rating|floatformat:2}} (<a href="{{book.get_absolute_url}}#reviews">{{book.review_set.count}} review{{book.review_set.count|pluralize}}</a>)
                        {% else %}
                            - (no reviews yet)
                        {% endif %}
                    {% else %}
                        Coming {{book.pub_date|date:'F'}} {{book.pub_date.day}},
                        {% if request.path == '/search/' and category == 'year' %}
                            {{book.pub_date.year}}
                        {% else %}
                            <a href="{% url 'br:search' %}?q={{book.pub_date.year}}&category=year">{{book.pub_date.year}}</a>
                        {% endif %}

                    {% endif %}
                </p>

                <p class="card-text">
                    {% if book.description|length > 500 %}
                        {{book.description|slice:':500'}}...
                    {% else %}
                        {{book.description}}
                    {% endif %}
                </p>

            </div>
        </div>
    </div>
</div>
